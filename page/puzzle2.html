<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rest'ART</title>
    <link rel="stylesheet" type="text/css" href="../index.css" />
    <link rel="stylesheet" type="text/css" href="../popup.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arapey&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
    <script src="../code.js"></script>
    <script src="../popup.js"></script>

    <style>
        .gallery {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
        }
        .gallery img {
            height: 100px;
            margin: 10px;
        }
        .titlepage3{
    font-family: 'Arapey', sans-serif;
    text-align: center;
    font-size: 36px;
    color: rgb(255, 168, 0);
    margin-top: 50px;
    margin-left: 50px;
    margin-right: 50px;
}


.grid {

  display: flex;
  justify-content: center;

}

.cell {
  width: 100px;
  height: 100px;
  border: 1px solid black;
  background-color: rgba(255, 255, 255, 0.1);
}

.cell[data-correct="true"] {
  border-color: white;
}

.slider{
    margin-top: 50px;
    background-color: #333;
  overflow: auto;
  white-space: nowrap;
}
.colortexthover {
        color: rgb(255, 168, 0);
        text-decoration: underline;
        cursor: pointer;
      }
      .colortext {
        color: rgb(255, 168, 0);
      }
    </style>
</head>
<body class="background-image">
  <div class="text">
    <img
    src="/images/Progress Bar/Progress Bar/InProgress_lvl2.webp"
    alt="Rest'Art"
    class="img-progres"/>
    <div class='titlepage4'><span class="colortexthover" onclick="openPopup()">Indice</span></div>
  </div>
<div class="titlepage3" style="font-size: 50px;">Epreuve N°2</div>

<div class="text"> Terminer le deuxième puzzle pour <span class="colortext">découvrir</span> l'emplacement du <span class="colortext">deuxième outil</span>.</div>



<br>
<br>

<div class="grid">
    <div class="cell" data-id="1" data-correct="false" height="100px" width="100px"></div>
    <div class="cell" data-id="2" data-correct="false" height="100px" width="100px"></div>
    <div class="cell" data-id="3" data-correct="false" height="100px" width="100px"></div>
</div>

  <div class="grid">
    <div class="cell" data-id="4" data-correct="false" height="100px" width="100px"></div>
    <div class="cell" data-id="5" data-correct="false" height="100px" width="100px"></div>
    <div class="cell" data-id="6" data-correct="false" height="100px" width="100px"></div>


  </div>
  <div class="grid">
    <div class="cell" data-id="7" data-correct="false" height="100px" width="100px"></div>
    <div class="cell" data-id="8" data-correct="false" height="100px" width="100px"></div>
    <div class="cell" data-id="9" data-correct="false" height="100px" width="100px"></div>
</div>


 
 <div class="slider">
  <img class="piece" data-id="2" src="../images/Puzzle_2/image_part_002.png" alt="" height="100px" width="100px">
  <img class="piece" data-id="7" src="../images/Puzzle_2/image_part_007.png" alt="" height="100px" width="100px">
  <img class="piece" data-id="8" src="../images/Puzzle_2/image_part_008.png" alt="" height="100px" width="100px">
  <img class="piece" data-id="5" src="../images/Puzzle_2/image_part_005.png" alt="" height="100px" width="100px">
  <img class="piece" data-id="6" src="../images/Puzzle_2/image_part_006.png" alt="" height="100px" width="100px">
  <img class="piece" data-id="1" src="../images/Puzzle_2/image_part_001.png" alt="" height="100px" width="100px">
  <img class="piece" data-id="9" src="../images/Puzzle_2/image_part_009.png" alt="" height="100px" width="100px">
  <img class="piece" data-id="3" src="../images/Puzzle_2/image_part_003.png" alt="" height="100px" width="100px">
  <img class="piece" data-id="4" src="../images/Puzzle_2/image_part_004.png" alt="" height="100px" width="100px">
 </div>

<br>
<br>

<br>
<br>
<a href="Epreuve2Page2.html" class="boutonpuzzle">SUIVANT</a>
<!--<a href="Epreuve2Page2.html" class="bouton">SUIVANT</a>-->


<script>
    var cells = document.querySelectorAll('.cell');
    var pieces = [...document.querySelectorAll('.piece')];
    var button = document.querySelector('.boutonpuzzle');

    var selectedKitty;
    
  

    console.log("kezf" , pieces);
    pieces.forEach(function(kitty) {
      kitty.addEventListener('click', function() {
        selectKitty(kitty);
        console.log('ATAz');
      })
    });
    
    function selectKitty(kitty) {
      if (selectedKitty) {
        selectedKitty.style.border = "none";
      }
    
      selectedKitty = kitty;
      selectedKitty.style.border = "3px solid #FFA800";
      
    }
    function unselectedkitty(){
        selectedKitty.style.border = "none";
        selectedKitty = null;
    }

    cells.forEach(function(cell) {
      cell.addEventListener('click', function() {
        selectCell(cell);
      })
    });
    
    function selectCell(cell) {
      console.log('data correct' , cell.getAttribute("data-correct"));
      console.log('selectedkitty' , selectedKitty);
      if (cell.getAttribute("data-correct") === "true") {
        return;
      }

      if(cell.getAttribute('data-id-inserted')){     
          console.log("data-correct", cell.getAttribute("data-correct"));
          selectedKitty = document.querySelector(`img[data-id="${cell.getAttribute("data-id-inserted")}"]`);
          selectedKitty.style.display = "inline";
          cell.style.backgroundImage = "none";
          
          cell.removeAttribute('data-id-inserted');
          unselectedkitty();
          return;
        }
        
        cell.style.backgroundImage = "url(" + selectedKitty.src + ")";
        cell.setAttribute("data-id-inserted", selectedKitty.getAttribute("data-id"))
      
        selectedKitty.style.display = "none"
        if (cell.getAttribute("data-id") === selectedKitty.getAttribute("data-id")) {
          cell.setAttribute("data-correct", true);
        } else {
         
          cell.setAttribute("data-correct", false);
        }
  
        unselectedkitty();
        
        checkAllCells();
      }
    
    function checkAllCells() {
      var isCorrect = true;
      
      cells.forEach(function(cell) {
        if (cell.getAttribute("data-correct") == "false") {
    
  
          isCorrect = false;


        }
      });
      
      if (isCorrect) {
        button.style.display= "flex";
        window.alert('gagné')


      }
    }
    
</script>
<div id="overlay" class="overlay" onclick="closePopup()"></div>
<div id="popup-container" class="popup-container">
  <img
    src="/images/Croix.png"
    alt="Fermer"
    class="close-image"
    onclick="closePopup()"
  />
  <div>
    <img src="../images/puzzle2_fond.png" alt="Rest'Art" class="img-popup2" />
  </div>
  <div class="textpopup">
    Voici une prévisualisation du tableau
    qui pourrait t'aider.
</div>
</div>
</body>
</html>